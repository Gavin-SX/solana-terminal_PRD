# Epic 4：实时图表（Real-Time Charts）

#### **#39 TradingView 图表集成 [P0]**
**定位**：集成专业第三方图表库作为技术分析基础。
*   **#39-1 图表组件渲染 (L1)**
    *   **组件-图表容器**：承载 TradingView 高级图表小部件。
    *   **组件-工具栏**：提供时间周期（1m/5m/1h等）、图表类型（蜡烛/线图）、绘图工具、指标选择器的快捷入口。
*   **#39-2 数据桥接 (L1)**
    *   **组件-数据喂送器**：将平台聚合的 Solana 链上 OHLCV 数据，转换为 TradingView 格式并实时喂送。
    *   **配置-图表样式**：允许用户自定义图表颜色、背景等视觉样式。

#### **#40 OHLCV K 线 [P0]**
**定位**：提供标准的蜡烛图核心数据。
*   **#40-1 K线数据生成 (L2)**
    *   **服务-数据聚合**：根据所选时间周期，将原始交易数据聚合为开盘价、最高价、最低价、收盘价、成交量。

#### **#41 实时 K 线更新 [P0]**
**定位**：确保图表随链上新交易极速更新，无感知延迟。
*   **#41-1 实时数据流 (L2)**
    *   **服务-WebSocket 流**：监听并接收新的链上交易事件。
    *   **服务-实时聚合器**：动态更新当前未结束的 K 线。

#### **#42 成交量展示 [P0]**
**定位**：在图表下方显示成交量柱状图，配合价格分析。
*   **#42-1 成交量图表 (L2)**
    *   **组件-成交量柱**：以柱状图形式展示对应 K 线周期的成交量。
    *   **配置-颜色映射**：可根据价格上涨（绿色）下跌（红色）映射成交量柱颜色。

#### **#43 交易气泡图 [P0]**
**定位**：在价格图表上叠加每一笔链上交易，实现微观可视化。（**核心差异化功能**）
*   **#43-1 气泡图层 (L1)**
    *   **组件-气泡渲染器**：在 TradingView 图表上层，通过独立 Canvas 或图层绘制交易气泡。
    *   **数据-交易流**：接收实时交易数据流（包含时间、价格、金额、买卖方向、钱包地址）。
*   **#43-2 气泡映射规则 (L2)**
    *   **配置-大小映射 (对应 #44)**：将交易金额或代币数量映射为气泡大小。
    *   **配置-颜色映射**：根据买卖方向（买入/卖出）或关联钱包类型（如聪明钱）映射气泡颜色。

#### **#45 气泡悬浮信息 [P1]**
**定位**：鼠标悬停时展示交易详情，提供即时洞察。
*   **#45-1 信息提示框 (L2)**
    *   **组件-Smart-Tooltip**：悬停时显示：交易时间、精确价格、交易金额（USD/SOL）、涉及代币数量、交易方向、钱包地址（缩写）。
    *   **操作-地址复制**：提供一键复制钱包地址的按钮。

#### **#46 聪明钱叠加层 [P1]**
**定位**：高亮标记被追踪的聪明钱地址的交易行为，辅助决策。
*   **#46-1 聪明钱过滤与高亮 (L1)**
    *   **数据-地址簿**：接入平台内部的“聪明钱钱包列表”。
    *   **配置-高亮样式**：为聪明钱交易设置特殊气泡样式（如特殊颜色、边框、图标）。
*   **#46-2 叠加层开关 (L2)**
    *   **组件-图层控制器**：在图表工具栏中提供开关，允许用户单独显示/隐藏聪明钱交易气泡。

#### **#47 点击气泡 → 钱包历史 [P2]**
**定位**：实现从图表洞察到深度分析的闭环。
*   **#47-1 交互路由 (L2)**
    *   **事件-气泡点击**：捕获用户对交易气泡的点击事件。
    *   **路由-页面跳转**：携带被点击交易的钱包地址参数，跳转至 **Epic 5** 的“钱包详情页”。

#### **#37 风险指标 UI [P0] (联动集成点)**
**定位**：将 Epic 3 的风险指标以可视化方式与图表联动。
*   **#37-1 图表标记集成 (L1)**
    *   **组件-事件标记**：在图表时间轴上标记重大风险事件（如“流动性解锁”、“大额捆绑交易检测”），点击可查看详情。
    *   **配置-指标叠加**：考虑将关键风险比率（如前10持仓占比）作为副图指标线叠加在图表上。

